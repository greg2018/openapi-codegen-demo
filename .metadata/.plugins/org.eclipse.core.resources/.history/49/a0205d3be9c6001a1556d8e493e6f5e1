openapi: 3.0.1
info:
  title: EO API Definition
  version: v1
servers:
  - url: 'http://10.200.22.64:8080/'
    description: "EO API"
paths:
  '/eo/clients/search':
    post:
      security:
       - bearerAuth: []   
      operationId: searchClient
      parameters:
        - in: header
          name: Ocp-Apim-Subscr
          schema:
            type: string
            format: string
          required: true


        - in: header
          name: organizationId
          schema:
            type: string
            format: string
          required: true
        - in: header
          name: organizationSiteId
          schema:
            type: string
            format: string
          required: false       
        - in: header
          name: userId  
          schema:
            type: string
            format: string
          required: false
      
        - in: header
          name: transactionDateTime 
          schema:
            type: string
            format: date-time
          required: true
      
        - in: header
          name: transactionId
          schema:
            type: string
            format: string
          required: true

        - in: header
          name: language
          schema:
            type: string
            enum: ["EN", "FR"]
            default: "EN"
          required: true
      requestBody:
          description: search client payload
          required: true
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientSearchRequest'
    
      responses:
        '400':
          description: Bad request
          headers:
            officeId::
              description: Office ID
              schema:
                type: string
                format: sting
            operatorId:
              description: operation ID
              schema:
                type: string
                format: sting
            organizationSiteId:
              description: organization Site Id
              schema:
                type: string
                format: sting
            userId:
              description: userId
              schema:
                type: string
                format: sting               
            transactionDateTime:
              description: transaction Date Time 
              schema:
                type: string
                format: date                               
            transactionId:
              description: transaction ID
              schema:
                type: string
                format: sting                 
            language:
              description: client used language 
              schema:
                type: string
                format: sting    
               
            responseTimestamp:
              description: response timeStamp 
              schema:
                type: string
                format: date-time       
          content:
           application/json:
              schema:
                $ref: '#/components/schemas/EOAPIResponse'
                
        '401':
          description: Unauthorized
          headers:
            officeId::
              description: Office ID
              schema:
                type: string
                format: sting
            operatorId:
              description: operation ID
              schema:
                type: string
                format: sting
            organizationSiteId:
              description: organization Site Id
              schema:
                type: string
                format: sting
            userId:
              description: userId
              schema:
                type: string
                format: sting               
            transactionDateTime:
              description: transaction Date Time 
              schema:
                type: string
                format: date-time                               
            transactionId:
              description: transaction ID
              schema:
                type: string
                format: sting                 
            language:
              description: client used language 
              schema:
                type: string
                format: sting    
               
            responseTimestamp:
              description: response timeStamp 
              schema:
                type: string
                format: date-time                 
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EOAPIResponse'
                
        '403':
          description: Forbidden
          headers:
            officeId::
              description: Office ID
              schema:
                type: string
                format: sting
            operatorId:
              description: operation ID
              schema:
                type: string
                format: sting
            organizationSiteId:
              description: organization Site Id
              schema:
                type: string
                format: sting
            userId:
              description: userId
              schema:
                type: string
                format: sting               
            transactionDateTime:
              description: transaction Date Time 
              schema:
                type: string
                format: date-time                               
            transactionId:
              description: transaction ID
              schema:
                type: string
                format: sting                 
            language:
              description: client used language 
              schema:
                type: string
                format: sting    
               
            responseTimestamp:
              description: response timeStamp 
              schema:
                type: string
                format: date-time       
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EOAPIResponse'
                
        '500':
          description: Internal Server error
          headers:
            officeId::
              description: Office ID
              schema:
                type: string
                format: sting
            operatorId:
              description: operation ID
              schema:
                type: string
                format: sting
            organizationSiteId:
              description: organization Site Id
              schema:
                type: string
                format: sting
            userId:
              description: userId
              schema:
                type: string
                format: sting               
            transactionDateTime:
              description: transaction Date Time 
              schema:
                type: string
                format: date-time                               
            transactionId:
              description: transaction ID
              schema:
                type: string
                format: sting                 
            language:
              description: client used language 
              schema:
                type: string
                format: sting    
               
            responseTimestamp:
              description: response timeStamp 
              schema:
                type: string
                format: date-time       
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EOAPIResponse'
              
 ##     '404':
 ##       description: "No Person records found for search parameters"
        '200':
          description: OK
          headers:
            officeId::
              description: Office ID
              schema:
                type: string
                format: sting
            operatorId:
              description: operation ID
              schema:
                type: string
                format: sting
            organizationSiteId:
              description: organization Site Id
              schema:
                type: string
                format: sting
            userId:
              description: userId
              schema:
                type: string
                format: sting               
            transactionDateTime:
              description: transaction Date Time 
              schema:
                type: string
                format: date-time                               
            transactionId:
              description: transaction ID
              schema:
                type: string
                format: sting                 
            language:
              description: client used language 
              schema:
                type: string
                format: sting    
               
            responseTimestamp:
              description: response timeStamp 
              schema:
                type: string
                format: date-time                              
          content:
            application/json:
             schema:
                $ref: '#/components/schemas/EOAPIResponse'
      
components:
  schemas:
    ClientSearchResult:
      type: object
      description: ""
      properties:
        firstName:
          type: string
          description: "First Name of the Client"
        lastName:
          type: string
          description: "Last Name of the Client"          
        dateOfBirth:
          type: string
          description: "Date of Birth of the Client"          
        referenceNumber:
          type: string
          description: "Reference Number of Client in EO"
        city:
          type: string
          description: "City of the Client's Primary Address"
        postalCode:
          type: string
          description: "Postal Code of the Client's Primary Address"
    EOAPIResponse:
      type: object
      properties:
        commonResponse:
          $ref: '#/components/schemas/CommonResponse'
        clientSearchResultDetails:
            type: array
            items:
              $ref: '#/components/schemas/ClientSearchResult'   
    CommonResponse:
       properties:
        resultInd:
          type: boolean
          description: "Indicates if the call was successful"
        message:
          type: string
          description: "Informational message about the call status"
    ClientSearchRequest:
      required:
       - firstName
       - lastName
      type: object
      description: "Person Search Results"
      properties:
        firstName:
          type: string
          description: "First Name of the Person"
         
        lastName:
          type: string
          description: "Last Name of the Person"   
  
        dateOfBirth:
          type: string
          format: date-time
          description: "Date of Birth of the Person" 
        gender:
          type: string
          format: string
          description: "gender of client"         
        referenceNumber:
          type: string
          description: "Reference Number of Person in EO"
    
  securitySchemes:
    bearerAuth:            # arbitrary name for the security scheme
      type: http
      scheme: bearer
      bearerFormat: JWT   
        
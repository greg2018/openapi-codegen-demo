package ca.on.eois.api.cm.rest.controller;

import org.springframework.http.HttpStatus;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.context.request.NativeWebRequest;

import ca.on.eois.api.ApiUtil;
import ca.on.eois.api.PersonApi;
import ca.on.eois.api.model.PersonSearchKey;
import ca.on.eois.api.model.PersonSearchResultDetails;
import io.swagger.annotations.ApiOperation;
import io.swagger.annotations.ApiParam;
import io.swagger.annotations.ApiResponse;
import io.swagger.annotations.ApiResponses;

import java.util.Optional;

//import javax.validation.Valid;
@javax.annotation.Generated(value = "org.openapitools.codegen.languages.SpringCodegen", date = "2020-07-13T14:18:47.964482700-04:00[America/New_York]")

@Controller
@RequestMapping("${openapi.eOAPIDefinition.base-path:}")
public class MyPersonApiController implements PersonApi {

	  @ApiOperation(value = "search person", nickname = "searchPerson", notes = "", response = PersonSearchResultDetails.class, tags={ "search person", })
	    @ApiResponses(value = { 
	        @ApiResponse(code = 400, message = "Bad request"),
	        @ApiResponse(code = 401, message = "Unauthorized"),
	        @ApiResponse(code = 403, message = "Forbidden"),
	        @ApiResponse(code = 500, message = "Internal error"),
	        @ApiResponse(code = 404, message = "No Person records found for search parameters"),
	        @ApiResponse(code = 200, message = "default response", response = PersonSearchResultDetails.class) })
	    @RequestMapping(value = "/person/search",
	        produces = { "*/*" }, 
	        consumes = { "application/json" },
	        method = RequestMethod.POST)
	   public ResponseEntity<PersonSearchResultDetails> searchPerson(@ApiParam(value = "search person payload" ,required=true )   @RequestBody PersonSearchKey personSearchKey) {
	        getRequest().ifPresent(request -> {
	            for (MediaType mediaType: MediaType.parseMediaTypes(request.getHeader("Accept"))) {
	                if (mediaType.isCompatibleWith(MediaType.valueOf("*/*"))) {
	                    ApiUtil.setExampleResponse(request, "*/*", "{  \"personSearchResultDetails\" : [ {    \"firstName\" : \"firstName\",    \"lastName\" : \"lastName\",    \"referenceNumber\" : \"referenceNumber\",    \"city\" : \"city\",    \"dateOfBirth\" : \"dateOfBirth\"  }, {    \"firstName\" : \"firstName\",    \"lastName\" : \"lastName\",    \"referenceNumber\" : \"referenceNumber\",    \"city\" : \"city\",    \"dateOfBirth\" : \"dateOfBirth\"  } ],  \"eoAPIResponse\" : {    \"resultInd\" : true,    \"message\" : \"message\"  }}");
	                    break;
	                }
	            }
	        });
	        return new ResponseEntity<>(HttpStatus.NOT_IMPLEMENTED);

	    }

  

 

}
